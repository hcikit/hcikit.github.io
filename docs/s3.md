---
id: s3
title: Uploading to S3
---

### Setup

In order to create a bucket to host the experiment and to store logfiles you can use `create-hci-experiment`. Create HCI Experiment will create a Cognito ID Pool, S3 bucket to store logs, an S3 bucket to deploy the website to, along with a script to deploy your experiment to that bucket.

First make sure your experiment package has a unique name, it must be unique across all of S3. A good example might prefix it with `exii-` like `exii-keymap`. Put this in `package.json` as a name field:

```
{
  "name" : "exii-keymap"
  ...
}
```

You also need to ensure you have a set of AWS credentials to create the buckets etc. You configure these by putting them in `~/.aws/credentials`. The easiest way to do this is by installing `aws-cli` and then running aws config.

Then run `npx @hcikit/hci-scripts s3` to generate everything you need for IDs etc.

This also generated some javascript files `createS3Uploader.js` and `S3Uploader.js` with the required IDs there.

### Configuring

Now all you need to do is add the task to your configuration and register it.

```
{
 task: "S3Upload",
 filename: "blaine_log",
 experimenter: "hello@world.com"
}
```

If you don't care if the upload is successful add `fireAndForget : true`
The upload task does need some information to upload and make sure there's a safe fallback for failed uploads. You can add your email as an `experimenter` property, and you also need a `filename`. Typically we use the participant ID and maybe a timestamp.

To learn more about the upload task you created check out https://hcikit.github.io/api/#upload

### Deploying

Finally to deploy your experiment run `npm run deploy`
which creates a website at:

http://<YOUR PACKAGE NAME>.s3-website.us-east-2.amazonaws.com

TODO: need to add documentation on how to get your aws credentials.
TODO: Explain how to download the documentation
TODO: explain that those credentials don't end up actually embedded
TODO: I updated hci-scripts to automate more of this and require less code copy and paste.

### Downloading Logs

Downloading your log files from s3 is very easy, simply write:
